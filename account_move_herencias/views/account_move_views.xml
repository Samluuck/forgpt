<?xml version="1.0" encoding="UTF-8"?>
<odoo>
  <data>
    <!-- Vista original: Ocultar campos existentes -->
    <record id="view_move_form_hide_custom_fields" model="ir.ui.view">
      <field name="name">account.move.form.hide.custom.fields</field>
      <field name="model">account.move</field>
      <field name="inherit_id" ref="account.view_move_form"/>
      <field name="priority">20</field>
      <field name="arch" type="xml">

        <!-- Ocultar Bill Reference solo en Bills -->
        <xpath expr="//group[@id='header_left_group']/label[@for='ref']" position="attributes">
          <attribute name="attrs">{'invisible':[('move_type','in',('out_invoice','in_invoice','in_refund','in_receipt'))]}</attribute>
        </xpath>
        <xpath expr="//group[@id='header_left_group']/field[@name='ref'][1]" position="attributes">
          <attribute name="attrs">{'invisible':[('move_type','in',('out_invoice','in_invoice','in_refund','in_receipt'))]}</attribute>
        </xpath>

        <!-- Ocultar Nro Constancia -->
        <xpath expr="//field[@name='nro_constancia']" position="attributes">
          <attribute name="attrs">{'invisible':[('move_type','in',('out_invoice','in_invoice','in_refund','in_receipt'))]}</attribute>
        </xpath>

        <!-- Ocultar Nro Control Constancia -->
        <xpath expr="//field[@name='nro_control_constancia']" position="attributes">
          <attribute name="attrs">{'invisible':[('move_type','in',('out_invoice','in_invoice','in_refund','in_receipt'))]}</attribute>
        </xpath>

        <!-- Ocultar Cuentas Bancarias (preservando readonly original) -->
        <xpath expr="//group[@id='header_left_group']/field[@name='partner_bank_id']" position="attributes">
          <attribute name="attrs">{'invisible':[('move_type','in',('out_invoice','in_invoice','in_refund','in_receipt'))]}</attribute>
        </xpath>
        <xpath expr="//group[@name='sale_info_group']/field[@name='partner_bank_id']" position="attributes">
          <attribute name="attrs">{'invisible':[('move_type','in',('out_invoice','in_invoice','in_refund','in_receipt'))]}</attribute>
        </xpath>

        <!-- Ocultar Tipo de cambio manual -->
        <xpath expr="//field[@name='tipo_cambio_manual']" position="attributes">
          <attribute name="attrs">{'invisible':[('move_type','in',('out_invoice','in_invoice','in_refund','in_receipt'))]}</attribute>
        </xpath>

        <!-- Ocultar Tipo de cambio -->
        <xpath expr="//field[@name='tipo_cambio']" position="attributes">
          <attribute name="attrs">{'invisible':[('move_type','in',('out_invoice','in_invoice','in_refund','in_receipt'))]}</attribute>
        </xpath>

      </field>
    </record>

    <!-- Nueva vista: Agregar funcionalidades adicionales - hereda de paraguay_backoffice -->
    <record id="view_move_form_additional_fields" model="ir.ui.view">
      <field name="name">account.move.form.additional.fields</field>
      <field name="model">account.move</field>
      <field name="inherit_id" ref="paraguay_backoffice.account_invoice_form_inherited"/>
      <field name="priority">22</field>
      <field name="arch" type="xml">

        <!-- Ocultar campo no_mostrar_libro_iva -->
        <xpath expr="//field[@name='no_mostrar_libro_iva']" position="attributes">
          <attribute name="invisible">1</attribute>
        </xpath>

        <!-- Ocultar campo aplicar_descuento -->
        <xpath expr="//field[@name='aplicar_descuento']" position="attributes">
          <attribute name="invisible">1</attribute>
        </xpath>

      </field>
    </record>

    <!-- Vista para ocultar f_chica - hereda de la vista que agrega el campo -->
    <record id="view_move_form_hide_f_chica" model="ir.ui.view">
      <field name="name">account.move.form.hide.f.chica</field>
      <field name="model">account.move</field>
      <field name="inherit_id" ref="caja_chica.view_invoice_form_inh"/>
      <field name="priority">24</field>
      <field name="arch" type="xml">
        <xpath expr="//field[@name='f_chica']" position="attributes">
          <attribute name="invisible">1</attribute>
        </xpath>
      </field>
    </record>

    <!-- El dominio de currency_id se configura dinámicamente desde Python -->
    <!-- mediante el método _onchange_move_type_currency en account_move.py -->

  </data>
</odoo>
