<odoo>
  <data>
        <!--Herencia factura venta-->
        <record model="ir.ui.view" id="invoice_form_inherited_factuelect">
            <field name="name">account.move.form.inh.factelect</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="account.view_move_form"/>
            <field name="arch" type="xml">
                <field name="invoice_date_due" position="replace">
                    <field name="invoice_date_due" attrs="{'required':['&amp;',('move_type','in',['out_invoice','out_refund']),('state','=','draft')]}"/>
                </field>
                <field name="invoice_payment_term_id" position="replace">
                    <field name="invoice_payment_term_id"  attrs="{'required':[('move_type','in',['out_invoice','out_refund']),('state','=','draft')]}"/>
                </field>
                <xpath expr="//form/sheet/notebook" position="inside">
                    <page string="Documento Electrónico">
                        <group>
                            <header>
                                <button name="enviar_factura_electronica" string="Enviar" type="object" class="oe_highlight" attrs="{'invisible':['|',('state','!=', 'posted'),('estado_de', 'in', ('aprobado','enviado','anulado'))]}"  />
                                <button name="descargar_xml" string="Descargar xml" type="object"/>
                                <field name="estado_de" widget="statusbar"/>
                            </header>
                        </group>
                        <group>
                            <group>
                                <field name="cdc" string="Codigo de Control (CDC) " readonly="1" />
                                <field name="qr_code" widget="image" class="oe_avatar" attrs="{'invisible':[('qr_code', '=', False)]}" />
                                <field name="secuencia"  invisible="1" />
                                <field name="fecha_firma"  invisible="1" />
                                <field name="tipo_emision"  />
                                <field name="info_kude"  />
                                <field name="tipo_transaccion" string="Tipo de transacción"  />
                                <field name="tipo_impuesto" string="Tipo de impuestos"  />
                                <field name="indicador_presencia" string="Indicador de Presencia"  />
                                <field name="descripcion_indi_presencia" string="Describir Otros" attrs="{'invisible':[('indicador_presencia', '!=', '9')],'required':[('indicador_presencia', '=', '9')]}" />
                                <field name="operacion_credito"  attrs="{'required':[('tipo_factura', '=', 2)]}"  />
                            </group>
                            <group>

                                <field name="texto_qr" invisible="1"/>
                                <field name="dEstRes" attrs="{'invisible':[('estado_de', 'not in', ('aprobado','rechazado'))]}"/>
                                <field name="dProtAut" attrs="{'invisible':[('estado_de', 'not in', ('aprobado','rechazado'))]}"/>
                                <field name="dFecProc" attrs="{'invisible':[('estado_de', 'not in', ('aprobado','rechazado'))]}"/>
                                <field name="mje_resultado_ids" readonly="1" >
                                    <tree>
                                        <field name="name"/>
                                        <field name="dMsgRes"/>
                                        <field name="tipo"/>
                                        <field name="invoice_id" invisible="1"/>
                                        <field name="create_date" string="Fecha creación" optional="hide"/>
                                        <field name="write_date" string="Fecha última actualización" optional="hide"/>
                                    </tree>
                                </field>
                            </group>
                        </group>
                        <group>
                            <field name="respuesta" readonly="1" groups="factura_electronica.responsable_factu_elect_group"/>
                            <field name="respuesta_lote" readonly="1" groups="factura_electronica.responsable_factu_elect_group"/>
                        </group>
                    </page>
                </xpath>
            </field>
        </record>

      <record model="ir.ui.view" id="invoice_form_inherited_factuelect_2">
            <field name="name">account.move.form.inh.factelect_2</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="paraguay_backoffice.account_invoice_form_inherited"/>
            <field name="arch" type="xml">
                <field name="tipo_comprobante" invisible="1"/>
                 <xpath expr="//field[@name='tipo_comprobante']" position="after">
                    <field name="factura_afectada" attrs="{'invisible':[('codigo_hechauka', '!=', 2)],'required':[('codigo_hechauka', '=', 2)]}" />

                 </xpath>
                <xpath expr="//field[@name='timbrado']" position="after">
                    <field name="tipo_documento_asociado" string="Tipo de Documento"  attrs="{'invisible':[('codigo_hechauka', 'not in', (3,2))],'readonly':[('state','!=','draft')],'required':[('codigo_hechauka', 'in', (3,2)),('state','=','draft')]}"/>
                </xpath>
                <xpath expr="//field[@name='porcentaje_descuento']" position="replace">
                   <field name="porcentaje_descuento" digits="[12,7]" attrs="{'invisible':['|',('aplicar_descuento','!=',True),('tipo_descuento','not in',('descuento_a','anticipo_a'))]}"/>
                </xpath>
                <xpath expr="//field[@name='aplicar_descuento']" position="after">
                   <field name="tipo_descuento"  attrs="{'invisible':[('aplicar_descuento','!=',True)]}"/>
                   <field name="monto_descuento"  attrs="{'invisible':['|',('aplicar_descuento','!=',True),('tipo_descuento','not in',('descuento_b','anticipo_b'))]}"/>
                </xpath>
                <xpath expr="//field[@name='factura_afectada']" position="before">
                    <field name="motivo_emision_nc" attrs="{'invisible':[('codigo_hechauka', 'not in', (3,2))],'readonly':[('state','!=','draft')],'required':[('codigo_hechauka', 'in', (3,2)),('state','=','draft')]}" />
                </xpath>
            </field>
        </record>

        <record model="ir.ui.view" id="invoice_form_inherited_factuelect_3">
            <field name="name">account.move.form.inh.factelect_3</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="paraguay_backoffice.account_te_invoice_form_inherited"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='talonario_factura']" position="after">
                    <field name="tipo_documento_asociado" string="Tipo de Documento"  attrs="{'invisible':[('tipo_talonario', 'not in', (5,3))],'required':['&amp;',('tipo_talonario', 'in', (5,3)),('state','=','draft')]}"/>
                    <field name="autofactura_partner_id" attrs="{'invisible':[('tipo_talonario', '!=', 5)],'required':['&amp;',('tipo_talonario','=',5),('state','=','draft')]}"/>
                    <field name="tipo_constancia"  attrs="{'invisible':[('tipo_documento_asociado', '!=', '3')],'required':[('tipo_documento_asociado', '=', '3')]}"/>
                                <field name="nro_constancia" attrs="{'invisible':[('tipo_constancia', '=', '1'),('tipo_documento_asociado', '!=', '3')],'required':[('tipo_constancia', '=', '2')]}"/>
                                <field name="nro_control_constancia" attrs="{'invisible':[('tipo_constancia', '=', '2'),('tipo_documento_asociado', '!=', '3')],'required':[('tipo_constancia', '=', '1')]}"/>
                </xpath>
            </field>
        </record>

      <record model="ir.ui.view" id="invoice_tree_inherited_factuelect">
            <field name="name">account.move.tree.inh.factelect</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="account.view_out_invoice_tree"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='state']" position="before">
                    <field name="cdc" optional="hide"/>
                    <field name="estado_de" string="Estado D.E."/>
                    <field name="fecha_procesamiento" optional="hide"/>
                </xpath>
            </field>
      </record>

       <record model="ir.ui.view" id="invoice_search_inherited_factuelect">
            <field name="name">account.move.search.inh.factelect</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="account.view_account_invoice_filter"/>
            <field name="arch" type="xml">
                 <xpath expr="//separator[2]"  position="before">
                    <separator string="Documento electrónico"/>
                    <filter name="no_enviado" string="No enviado" domain="[('estado_de', '=', 'no-enviado')]"/>
                    <filter name="enviado" string="Enviado" domain="[('estado_de', '=', 'enviado')]"/>
                    <filter name="aprobado" string="Aprobado" domain="[('estado_de', '=', 'aprobado')]"/>
                    <filter name="rechazado" string="Rechazado" domain="[('estado_de', '=', 'rechazado')]"/>
                </xpath>
            </field>
      </record>
  </data>
</odoo>
