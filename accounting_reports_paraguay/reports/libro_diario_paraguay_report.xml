<odoo>
  <template id="libro_diario_paraguay_report">
    <t t-call="web.html_container">
          <t t-foreach="docs" t-as="o">
              <t t-call="web.basic_layout">
                   <t t-set="cantidad_debito" t-value="0"/>
                  <t t-set="cantidad_credito" t-value="0"/>
                  <div class="page" >
                   <div class="contenedor"/>
                      <link rel="stylesheet" href="/accounting_reports_paraguay/static/src/css/libro_diario.css"/>

                       <!-- Variables -->
                      <t t-set="longitud" t-value="0"/>
                      <t t-set="move_actual"/>

                          <table class="tabla">
                                  <tr style="border-style:solid;">
                                      <td>Asiento</td>
                                      <td width="200">Fecha</td>
                                      <td width="500">Codigo</td>
                                      <td>Debe</td>
                                      <td>Haber</td>
                                  </tr>
                              <tbody>
                                  <t t-set="i" t-value="0"/>
                                  <t t-set="counter" t-value="0"/>
                                  <t t-foreach="lineas" t-as="l">
                                     <t t-if="i == 72">
                                          <tr style="border-style:solid;">
                                              <td class="negrita">Asiento</td>
                                              <td class="negrita" width="500">Codigo</td>
                                              <td class="negrita" width="200">Fecha</td>
                                              <td class="negrita">Debe</td>
                                              <td class="negrita">Haber</td>
                                            </tr>
                                            <tr>
                                              <td class="negrita" colspan="3">Transporte</td>
                                              <td><span t-esc="o.agregar_punto_de_miles(cantidad_debito)"/></td>
                                              <td><span t-esc="o.agregar_punto_de_miles(cantidad_credito)"/></td>
                                             </tr>
                                            <t t-set="i" t-value="2"/>

                                         </t>
                                      <t t-set="i" t-value="i+ 1"/>

                                      <t t-if="l.move_id != move_actual">
                                          <t t-set="move_actual" t-value="l.move_id"/>
                                          <t t-set="cadena" t-value="' '"/>
                                          <tr>
                                              <td><span t-field="l.move_id.id"/></td>
                                              <td class="izquierda"><span  t-field="l.move_id.date" t-field-options="{'format': 'dd/MM/yyyy'}"/></td>
                                                  <t t-if="l.partner_id">
                                                      <t t-set="cadena" t-value="cadena + l.partner_id.name"/>
                                                  </t>
                                                  <t t-if="l.move_id.ref">
<!--                                                      <span t-esc="l.move_id.ref[:30]"/>-->
                                                      <t t-set="cadena" t-value="cadena + ' ' + l.move_id.ref"/>

                                                  </t>
                                                  <t t-else="">
                                                      <t t-set="cadena" t-value="l.name"/>
                                                  </t>
                                              <td class="izquierda"> <t t-esc="cadena[:55].lower()"/> </td>
                                          </tr>

                                         <t t-if="i == 72">
                                            <tr>
                                              <td class="transporte"  colspan="3">Transporte</td>
                                              <td class="transporte" ><span t-esc="o.agregar_punto_de_miles(cantidad_debito)"/></td>
                                              <td class="transporte" ><span t-esc="o.agregar_punto_de_miles(cantidad_credito)"/></td>
                                          </tr>

                                         </t>
                                          <t t-if="i == 72">
                                          <tr style="border-style:solid;">
                                              <td class="negrita">Asiento</td>
                                              <td class="negrita" width="200">Fecha</td>
                                              <td class="negrita" width="500">Codigo</td>
                                              <td class="negrita">Debe</td>
                                              <td class="negrita">Haber</td>
                                            </tr>
                                            <tr>
                                              <td class="negrita" colspan="3">Transporte</td>
                                              <td class="negrita"><span t-esc="o.agregar_punto_de_miles(cantidad_debito)"/></td>
                                              <td class="negrita"><span t-esc="o.agregar_punto_de_miles(cantidad_credito)"/></td>
                                             </tr>
                                            <t t-set="i" t-value="2"/>

                                         </t>
                                          <tr>
                                               <t t-set="i" t-value="i+ 1"/>
                                              <t t-set="counter" t-value="counter+ 1"/>
                                              <td><span t-esc="i"/></td>
                                              <td class="izquierda"><span t-esc="l.account_id.name[:25]"/></td>
                                              <td/>
                                              <td><span t-esc="o.agregar_punto_de_miles(l.debit)"/> </td>
                                              <t t-set="cantidad_debito" t-value="cantidad_debito + l.debit"/>
                                              <td><span t-esc="o.agregar_punto_de_miles(l.credit)"/> </td>
                                              <t t-set="cantidad_credito" t-value="cantidad_credito + l.credit"/>

                                          </tr>
                                      </t>
                                      <t t-else="">
                                          <tr>
                                               <td><span t-esc="i"/></td>
                                              <td class="izquierda"><span t-esc="l.account_id.name[:25]"/></td>
                                              <td/>
                                              <td><span t-esc="o.agregar_punto_de_miles(l.debit)"/> </td>
                                              <t t-set="cantidad_debito" t-value="cantidad_debito + l.debit"/>
                                              <td><span t-esc="o.agregar_punto_de_miles(l.credit)"/> </td>
                                              <t t-set="cantidad_credito" t-value="cantidad_credito + l.credit"/>
                                          </tr>
                                      </t>

                                    <t t-if="i == 72">
                                            <tr>
                                              <td class="transporte" colspan="3">Transporte</td>
                                              <td class="transporte" ><span t-esc="o.agregar_punto_de_miles(cantidad_debito)"/></td>
                                              <td class="transporte" ><span t-esc="o.agregar_punto_de_miles(cantidad_credito)"/></td>
                                          </tr>

                                         </t>

                                  </t>
                                  <tr>
                                       <td style="font-weight:bold" colspan="3">Totales</td>
                                                      <td style="font-weight:bold"><span t-esc="o.agregar_punto_de_miles(cantidad_debito)"/></td>
                                                      <td style="font-weight:bold"><span t-esc="o.agregar_punto_de_miles(cantidad_credito)"/></td>
                                  </tr>

                              </tbody>
                          </table>

                    </div>

              </t>
          </t>
    </t>
  </template>
</odoo>