<odoo>
  <template id="estado_patrimonio_report">
    <t t-call="web.html_container">
          <t t-foreach="docs" t-as="o">
              <t t-call="web.basic_layout">
                  <link rel="stylesheet" href="/accounting_reports_paraguay/static/src/css/estado_patrimonio.css"/>
                         <div class="header">
                    <div class="col-12 text-center negrita">
                      <h3 style="font-size:18px; font-weight: bold;">Anexo 4</h3>
                      <h4 style="font-size:12px; font-weight: bold;">ESTADO DE CAMBIOS EN EL PATRIMONIO NETO</h4>
                    </div>
                    <div class="col-12" style="font-size:10px;">
                      <div class="row">
                        <div class="col-8 text-center" style="border: 1px solid black;">
                          <span style="font-weight: bold;">1-IDENTIFICACIÓN DEL CONTRIBUYENTE</span>
                        </div>
                        <div class="col-4 text-center" style="border: 1px solid black;">
                          <span style="font-weight: bold;">2- EJERCICIO FISCAL</span>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-4 text-center" style="border: 1px solid black; border-top: 0;">
                          <span style="font-weight: bold;">RAZÓN SOCIAL O NOMBRES Y APELLIDOS</span>
                        </div>
                        <div class="col-4 text-center" style="border: 1px solid black; border-top: 0; border-left: 0;">
                          <span style="font-weight: bold;">IDENTIFICADOR RUC</span>
                        </div>
                        <div class="col-2 text-center" style="border: 1px solid black; border-top: 0; border-left: 0;">
                          <span style="font-weight: bold;">DESDE</span>
                        </div>
                        <div class="col-2 text-center" style="border: 1px solid black; border-top: 0; border-left: 0;">
                          <span style="font-weight: bold;">HASTA</span>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-4 text-center" style="border: 1px solid black; border-top: 0;">
                          <t t-if="o.company_id.razon_social">
                            <span t-field="o.company_id.razon_social"/>
                          </t>
                          <t t-else="">N/A</t>
                        </div>
                        <div class="col-4 text-center" style="border: 1px solid black; border-top: 0; border-left: 0;">
                          <t t-if="o.company_id.ruc">
                            <span t-field="o.company_id.ruc"/>-<span t-field="o.company_id.dv"/>
                          </t>
                          <t t-else="">N/A</t>
                        </div>
                        <div class="col-2 text-center" style="border: 1px solid black; border-top: 0; border-left: 0;">
                          <span t-esc="o.formatear_fecha(o.fecha_inicio)"/>
                        </div>
                        <div class="col-2 text-center" style="border: 1px solid black; border-top: 0; border-left: 0;">
                          <span t-esc="o.formatear_fecha(o.fecha_fin)"/>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-4 text-center" style="border: 1px solid black; border-top: 0;">
                          <span style="font-weight: bold;">3- IDENTIFICACIÓN DEL REPRESENTANTE LEGAL</span>
                        </div>
                        <div class="col-4 text-center" style="border: 1px solid black; border-top: 0; border-left: 0;">
                          <span style="font-weight: bold;">4- IDENTIFICACIÓN DEL CONTADOR</span>
                        </div>
                        <div class="col-4 text-center" style="border: 1px solid black; border-top: 0; border-left: 0;">
                          <span style="font-weight: bold;">5- IDENTIFICACIÓN DEL AUDITOR</span>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-4 text-center" style="border: 1px solid black; border-top: 0;">
                          <span><t t-if="o.company_id.representante_legal"><span t-field="o.company_id.representante_legal"/></t><t t-else="">N/A</t></span>
                        </div>
                        <div class="col-2 text-center" style="border: 1px solid black; border-top: 0; border-left: 0;">
                          <span><t t-if="o.company_id.contador"><span t-field="o.company_id.contador"/></t><t t-else="">N/A</t></span>
                        </div>
                        <div class="col-2 text-center" style="border: 1px solid black; border-top: 0; border-left: 0;">
                          <span><t t-if="o.company_id.ruc_contador"><span t-field="o.company_id.ruc_contador"/></t><t t-else="">N/A</t></span>
                        </div>
                        <div class="col-2 text-center" style="border: 1px solid black; border-top: 0; border-left: 0;">
                          <span><t t-if="o.company_id.auditor"><span t-field="o.company_id.auditor"/></t><t t-else="">N/A</t></span>
                        </div>
                        <div class="col-2 text-center" style="border: 1px solid black; border-top: 0; border-left: 0;">
                          <span><t t-if="o.company_id.ruc_auditor"><span t-field="o.company_id.ruc_auditor"/></t><t t-else="">N/A</t></span>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="page">
                      <div class="contenedor">
                        <table>
                            <tbody>
                                <tr>

                                  <td class="negrita" rowspan="2" colspan="3">CUENTAS</td>
                                  <td class="negrita" colspan="1">CAPITAL</td>
                                  <td class="negrita" colspan="3">RESERVAS</td>
                                  <td class="negrita" colspan="2">RESULTADOS</td>
                                  <td class="negrita" rowspan="2" colspan="2">PATRIMONIO NETO</td>
                                </tr>
                              <tr>

                                  <td class="negrita" colspan="1">INTEGRADO</td>
                                  <td class="negrita" colspan="1">LEGAL</td>
                                  <td class="negrita" colspan="1">DE REVALUO</td>
                                  <td class="negrita" colspan="1">OTRAS RESERVAS</td>
                                  <td class="negrita" colspan="1">ACUMULADOS</td>
                                  <td class="negrita" colspan="1">DEL EJERCICIO</td>

                                </tr>

                            </tbody>

                            <tbody>

                                  <tr>
                                <td class="negrita text-left" colspan="3">SALDO AL INICIO DEL EJERCICIO <span t-esc="o.obtener_anio_anterior(o.fecha_inicio)"/></td>
                                  <td class="negrita" colspan="1"><span t-esc="o.agregar_punto_de_miles(abs(int(movimientos[0]['total'])))"/></td>
                                  <td class="negrita" colspan="1"><span t-esc="o.agregar_punto_de_miles(abs(int(movimientos[1]['total'])))"/></td>
                                  <td class="negrita" colspan="1"><span t-esc="o.agregar_punto_de_miles(abs(int(movimientos[2]['total'])))"/></td>
                                  <td class="negrita" colspan="1"><span t-esc="o.agregar_punto_de_miles(int(movimientos[3]['total']))"/></td>
                                  <td class="negrita" colspan="1"><span t-esc="o.agregar_punto_de_miles(int(movimientos[4]['total']))"/></td>
                                  <td class="negrita" colspan="1"><span t-esc="o.agregar_punto_de_miles(int(movimientos[5]['total']))"/></td>
                                  <td class="negrita" colspan="2"><span t-esc="o.agregar_punto_de_miles(abs(int(movimientos[0]['total']))+abs(int(movimientos[1]['total']))+abs(int(movimientos[2]['total']))+int(movimientos[3]['total'])+int(movimientos[4]['total'])+int(movimientos[5]['total']))"/></td>

                                </tr>

                                <tr>
                                <td class="negrita text-left" colspan="3">MOVIMIENTOS  DEL EJERCICIO <span t-esc="o.obtener_anio_anterior(o.fecha_inicio)"/></td>
                                  <td class="negrita" colspan="1"/>
                                  <td class="negrita" colspan="1"/>
                                  <td class="negrita" colspan="1"/>
                                  <td class="negrita" colspan="1"/>
                                  <td class="negrita" colspan="1"/>
                                  <td class="negrita" colspan="1"/>
                                  <td class="negrita" colspan="2"/>

                                </tr>

                                <tr>
                                <td class="text-left" colspan="3">INTEGRACIÓN DE CAPITAL</td>
                                  <td colspan="1"><span t-esc="o.agregar_punto_de_miles(abs(int(movimientos[7]['total'])))"/></td>
                                  <td colspan="1"/>
                                  <td colspan="1"/>
                                  <td colspan="1"/>
                                  <td colspan="1"><span t-esc="o.agregar_punto_de_miles(-1*abs(int(movimientos[7]['total'])))"/></td>
                                  <td colspan="1"/>
                                  <td colspan="2">0</td>

                                </tr>
                                <tr>
                                <td class="text-left" colspan="3">TRANSFERENCIA A DIVIDENDOS A PAGAR</td>
                                  <td colspan="1"/>
                                  <td colspan="1"/>
                                  <td colspan="1"/>
                                  <td colspan="1"/>
                                  <td colspan="1"><span t-esc="o.agregar_punto_de_miles(-1*abs(int(movimientos[13]['total'])))"/></td>
                                  <td colspan="1"/>
                                  <td colspan="2"><span t-esc="o.agregar_punto_de_miles(-1*abs(int(movimientos[13]['total'])))"/></td>

                                </tr>
                                <tr>
                                <td class="text-left" colspan="3">TRANSFERENCIA A RESULTADOS ACUMULADOS</td>
                                  <td colspan="1"/>
                                  <td colspan="1"/>
                                  <td colspan="1"/>
                                  <td colspan="1"/>
                                  <td colspan="1"><span t-esc="o.agregar_punto_de_miles(abs(int(movimientos[11]['total'])))"/></td>
                                  <td colspan="1"><span t-esc="o.agregar_punto_de_miles(-1*abs(int(movimientos[11]['total'])))"/></td>
                                  <td colspan="2">0</td>

                                </tr>
                                <tr>
                                <td class="text-left" colspan="3">AJUSTES/ DESAFECTAC. DE RESULT. ACUMULADOS</td>
                                  <td colspan="1"/>
                                  <td colspan="1"/>
                                  <td colspan="1"/>
                                  <td colspan="1"/>
                                  <td colspan="1"/>
                                  <td colspan="1"/>
                                  <td colspan="2">0</td>

                                </tr>

                                <tr>
                                <td class="text-left" colspan="3">RESERVA LEGAL</td>
                                  <td colspan="1"/>
                                  <td colspan="1"><span t-esc="o.agregar_punto_de_miles(abs(int(movimientos[8]['total'])))"/></td>
                                  <td colspan="1"/>
                                  <td colspan="1"/>
                                  <td colspan="1"/>
                                  <td colspan="1"/>
                                  <td colspan="2"><span t-esc="o.agregar_punto_de_miles(abs(int(movimientos[8]['total'])))"/></td>

                                </tr>

                                <tr>
                                <td class="text-left" colspan="3">RESERVA DE REVALÚO</td>
                                  <td colspan="1"/>
                                  <td colspan="1"/>
                                  <td colspan="1"><span t-esc="o.agregar_punto_de_miles(abs(int(movimientos[9]['total'])))"/></td>
                                  <td colspan="1"/>
                                  <td colspan="1"/>
                                  <td colspan="1"/>
                                  <td colspan="2"><span t-esc="o.agregar_punto_de_miles(abs(int(movimientos[9]['total'])))"/></td>

                                </tr>

                                <tr>
                                <td class="text-left" colspan="3">OTRAS RESERVAS</td>
                                  <td colspan="1"/>
                                  <td colspan="1"/>
                                  <td colspan="1"/>
                                  <td colspan="1"><span t-esc="o.agregar_punto_de_miles(abs(int(movimientos[10]['total'])))"/></td>
                                  <td colspan="1"/>
                                  <td colspan="1"/>
                                  <td colspan="2"><span t-esc="o.agregar_punto_de_miles(abs(int(movimientos[10]['total'])))"/></td>

                                </tr>

                                <tr>
                                <td class="negrita text-left" colspan="3">RESULTADO DEL EJERCICIO</td>
                                  <td class="negrita" colspan="1"/>
                                  <td class="negrita" colspan="1"/>
                                  <td class="negrita" colspan="1"/>
                                  <td class="negrita" colspan="1"/>
                                  <td class="negrita" colspan="1"/>
                                  <td class="negrita" colspan="1"><span t-esc="o.agregar_punto_de_miles(int(movimientos[12]['total']))"/></td>
                                  <td class="negrita" colspan="2"><span t-esc="o.agregar_punto_de_miles(int(movimientos[12]['total']))"/></td>

                                </tr>

                                <tr>
                                <td class="negrita text-left" colspan="3">SALDO AL CIERRE DEL EJERCICIO <span t-esc="o.obtener_anio_anterior(o.fecha_inicio)"/> e INICIO DEL  EJERCICIO <span t-esc="o.obtener_anio_actual(o.fecha_inicio)"/></td>
                                  <td class="negrita" colspan="1"><span t-esc="o.agregar_punto_de_miles(abs(int(movimientos[14]['total'])))"/></td>
                                  <td class="negrita" colspan="1"><span t-esc="o.agregar_punto_de_miles(abs(int(movimientos[15]['total'])))"/></td>
                                  <td class="negrita" colspan="1"><span t-esc="o.agregar_punto_de_miles(abs(int(movimientos[16]['total'])))"/></td>
                                  <td class="negrita" colspan="1"><span t-esc="o.agregar_punto_de_miles(abs(int(movimientos[17]['total'])))"/></td>
                                  <td class="negrita" colspan="1"><span t-esc="o.agregar_punto_de_miles(int(movimientos[18]['total']))"/></td>
                                  <td class="negrita" colspan="1"><span t-esc="o.agregar_punto_de_miles(int(movimientos[19]['total']))"/></td>
                                  <td class="negrita" colspan="2"><span t-esc="o.agregar_punto_de_miles(abs(int(movimientos[30]['total'])))"/></td>

                                </tr>

                                <tr>
                                <td class="negrita text-left" colspan="3">MOVIMIENTOS  DEL EJERCICIO <span t-esc="o.obtener_anio_actual(o.fecha_inicio)"/></td>
                                  <td class="negrita" colspan="1"/>
                                  <td class="negrita" colspan="1"/>
                                  <td class="negrita" colspan="1"/>
                                  <td class="negrita" colspan="1"/>
                                  <td class="negrita" colspan="1"/>
                                  <td class="negrita" colspan="1"/>
                                  <td class="negrita" colspan="2"/>

                                </tr>

                                <tr>
                                <td class="text-left" colspan="3">INTEGRACIÓN DE CAPITAL</td>
                                  <td colspan="1"><span t-esc="o.agregar_punto_de_miles(abs(int(movimientos[21]['total'])))"/></td>
                                  <td colspan="1"/>
                                  <td colspan="1"/>
                                  <td colspan="1"/>
                                  <td colspan="1"><span t-esc="o.agregar_punto_de_miles(-1*abs(int(movimientos[21]['total'])))"/></td>
                                  <td colspan="1"/>
                                  <td colspan="2">0</td>

                                </tr>
                                <tr>
                                <td class="text-left" colspan="3">TRANSFERENCIA A DIVIDENDOS A PAGAR</td>
                                  <td colspan="1"/>
                                  <td colspan="1"/>
                                  <td colspan="1"/>
                                  <td colspan="1"/>
                                  <td colspan="1"><span t-esc="o.agregar_punto_de_miles(-1*abs(int(movimientos[27]['total'])))"/></td>
                                  <td colspan="1"/>
                                  <td colspan="2"><span t-esc="o.agregar_punto_de_miles(-1*abs(int(movimientos[27]['total'])))"/></td>

                                </tr>
                                <tr>
                                <td class="text-left" colspan="3">TRANSFERENCIA A RESULTADOS ACUMULADOS</td>
                                  <td colspan="1"/>
                                  <td colspan="1"/>
                                  <td colspan="1"/>
                                  <td colspan="1"/>
                                  <td colspan="1"><span t-esc="o.agregar_punto_de_miles(abs(int(movimientos[25]['total'])))"/></td>
                                  <td colspan="1"><span t-esc="o.agregar_punto_de_miles(-1*abs(int(movimientos[25]['total'])))"/></td>
                                  <td colspan="2">0</td>

                                </tr>
                                <tr>
                                <td class="text-left" colspan="3">AJUSTES/ DESAFECTAC. DE RESULT. ACUMULADOS</td>
                                  <td colspan="1"/>
                                  <td colspan="1"/>
                                  <td colspan="1"/>
                                  <td colspan="1"/>
                                  <td colspan="1"/>
                                  <td colspan="1"/>
                                  <td colspan="2">0</td>

                                </tr>

                                <tr>
                                <td class="text-left" colspan="3">RESERVA LEGAL</td>
                                  <td colspan="1"/>
                                  <td colspan="1"><span t-esc="o.agregar_punto_de_miles(abs(int(movimientos[22]['total'])))"/></td>
                                  <td colspan="1"/>
                                  <td colspan="1"/>
                                  <td colspan="1"/>
                                  <td colspan="1"/>
                                  <td colspan="2"><span t-esc="o.agregar_punto_de_miles(abs(int(movimientos[22]['total'])))"/></td>

                                </tr>

                                <tr>
                                <td class="text-left" colspan="3">RESERVA DE REVALÚO</td>
                                  <td colspan="1"/>
                                  <td colspan="1"/>
                                  <td colspan="1"><span t-esc="o.agregar_punto_de_miles(abs(int(movimientos[23]['total'])))"/></td>
                                  <td colspan="1"/>
                                  <td colspan="1"/>
                                  <td colspan="1"/>
                                  <td colspan="2"><span t-esc="o.agregar_punto_de_miles(abs(int(movimientos[23]['total'])))"/></td>

                                </tr>

                                <tr>
                                <td class="text-left" colspan="3">OTRAS RESERVAS</td>
                                  <td colspan="1"/>
                                  <td colspan="1"/>
                                  <td colspan="1"/>
                                  <td colspan="1"><span t-esc="o.agregar_punto_de_miles(abs(int(movimientos[24]['total'])))"/></td>
                                  <td colspan="1"/>
                                  <td colspan="1"/>
                                  <td colspan="2"><span t-esc="o.agregar_punto_de_miles(abs(int(movimientos[24]['total'])))"/></td>

                                </tr>

                                <tr>
                                <td class="negrita text-left" colspan="3">RESULTADO DEL EJERCICIO</td>
                                  <td class="negrita" colspan="1"/>
                                  <td class="negrita" colspan="1"/>
                                  <td class="negrita" colspan="1"/>
                                  <td class="negrita" colspan="1"/>
                                  <td class="negrita" colspan="1"/>
                                  <td class="negrita" colspan="1"><span t-esc="o.agregar_punto_de_miles(int(movimientos[26]['total']))"/></td>
                                  <td class="negrita" colspan="2"><span t-esc="o.agregar_punto_de_miles(int(movimientos[26]['total']))"/></td>

                                </tr>

                                <tr>
                                <td class="negrita text-left" colspan="3">SALDO AL CIERRE DEL EJERCICIO <span t-esc="o.obtener_anio_actual(o.fecha_inicio)"/></td>
                                  <td class="negrita" colspan="1"><span t-esc="o.agregar_punto_de_miles(abs(int(movimientos[14]['total'])+int(movimientos[21]['total'])))"/></td>
                                  <td class="negrita" colspan="1"><span t-esc="o.agregar_punto_de_miles(abs(int(movimientos[15]['total'])+int(movimientos[22]['total'])))"/></td>
                                  <td class="negrita" colspan="1"><span t-esc="o.agregar_punto_de_miles(abs(int(movimientos[16]['total'])+int(movimientos[23]['total'])))"/></td>
                                  <td class="negrita" colspan="1"><span t-esc="o.agregar_punto_de_miles(abs(int(movimientos[17]['total'])+int(movimientos[24]['total'])))"/></td>
                                  <td class="negrita" colspan="1"><span t-esc="o.agregar_punto_de_miles(int(movimientos[18]['total'])+int(movimientos[21]['total'])+abs(int(movimientos[25]['total'])))"/></td>
                                  <td class="negrita" colspan="1"><span t-esc="o.agregar_punto_de_miles(int(movimientos[26]['total']))"/></td>
<!--                                    SE LE RESTA LOS RESULTADOS ACUMULADOS AL TOTAL PARA OBTENER EL VALOR CORRECTO-->
                                  <td class="negrita" colspan="2"><span t-esc="o.agregar_punto_de_miles(abs(int(movimientos[14]['total'])+int(movimientos[21]['total'])) +abs(int(movimientos[15]['total'])+int(movimientos[22]['total'])) +abs(int(movimientos[16]['total'])+int(movimientos[23]['total'])) +abs(int(movimientos[17]['total'])+int(movimientos[24]['total'])) +int(movimientos[18]['total'])+int(movimientos[21]['total'])+abs(int(movimientos[25]['total'])) +int(movimientos[26]['total']))"/></td>
                                </tr>


                              </tbody>
                        </table>






<!--                        <table class="tabla">-->

<!--                                  <tr t-foreach="movimientos" t-as="m">-->
<!--                                      <t t-if="m['padre']==True">-->
<!--                                      <td colspan="1" class="text-left negrita"><span t-esc="m['code']"/> </td>-->
<!--                                      <td colspan="7" class="text-left negrita"> <span t-esc="m['name']"/> </td>-->
<!--                                      <td colspan="1" class="text-left negrita"><span t-esc="o.agregar_punto_de_miles(abs(int(m['total'])))"/> </td>-->
<!--                                      <td colspan="1" class="text-left negrita"><span t-esc="o.agregar_punto_de_miles(abs(int(m['total_ant'])))"/> </td>-->
<!--                                      </t>-->
<!--                                      <t t-else="">-->
<!--                                        <td colspan="1" class="text-left"><span t-esc="m['code']"/> </td>-->
<!--                                      <td colspan="7" class="text-left"> <span t-esc="m['name']"/> </td>-->
<!--                                      <td colspan="1" class="text-left"><span t-esc="o.agregar_punto_de_miles(abs(int(m['total'])))"/> </td>-->
<!--                                      <td colspan="1" class="text-left"><span t-esc="o.agregar_punto_de_miles(abs(int(m['total_ant'])))"/></td>-->
<!--                                      </t>-->

<!--                                  </tr>-->
<!--                              </tbody>-->
<!--                          </table>-->
                    </div>
                  </div>
              </t>
          </t>
    </t>
  </template>
</odoo>